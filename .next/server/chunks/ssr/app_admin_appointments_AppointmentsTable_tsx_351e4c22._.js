module.exports=[11864,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(56711),f=a.i(45474);let g=(0,a.i(70106).default)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);var h=a.i(33508);function i({initialData:a}){let i=(0,d.useRouter)(),[j,k]=(0,c.useState)(a),[l,m]=(0,c.useState)("ALL"),[n,o]=(0,c.useState)({}),p=j.filter(a=>"ALL"===l||("PENDING"===l?"PENDING_CONFIRMATION"===a.status:a.status===l)),q=async(a,b)=>{o(b=>({...b,[a]:!0}));try{(await fetch(`/api/appointments/${a}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:b})})).ok&&(k(c=>c.map(c=>c.id===a?{...c,status:b}:c)),i.refresh())}catch(a){console.error(a)}finally{o(b=>({...b,[a]:!1}))}};return(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-sm",children:[(0,b.jsx)("div",{className:"p-4 border-b border-gray-100 flex gap-2",children:["ALL","PENDING","CONFIRMED","CANCELED"].map(a=>(0,b.jsx)("button",{onClick:()=>m(a),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${l===a?"bg-primary-50 text-primary-700":"text-gray-600 hover:bg-gray-50"}`,children:"ALL"===a?"Tümü":"PENDING"===a?"Bekleyenler":a},a))}),(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,b.jsx)("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-3",children:"Müşteri"}),(0,b.jsx)("th",{className:"px-6 py-3",children:"Hizmet"}),(0,b.jsx)("th",{className:"px-6 py-3",children:"Tarih"}),(0,b.jsx)("th",{className:"px-6 py-3",children:"Durum"}),(0,b.jsx)("th",{className:"px-6 py-3 text-right",children:"İşlemler"})]})}),(0,b.jsxs)("tbody",{children:[p.map(a=>(0,b.jsxs)("tr",{className:"bg-white border-b hover:bg-gray-50",children:[(0,b.jsxs)("td",{className:"px-6 py-4 font-medium text-gray-900",children:[a.customerName,(0,b.jsx)("div",{className:"text-gray-500 text-xs font-normal",children:a.customerPhone})]}),(0,b.jsx)("td",{className:"px-6 py-4",children:a.service?.name||"Hizmet silinmiş"}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,e.format)(new Date(a.startAt),"d MMM yyyy HH:mm",{locale:f.tr})}),(0,b.jsx)("td",{className:"px-6 py-4",children:(a=>{switch(a){case"CONFIRMED":return(0,b.jsx)("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded-full text-xs",children:"Onaylı"});case"PENDING_CONFIRMATION":return(0,b.jsx)("span",{className:"px-2 py-1 bg-orange-100 text-orange-700 rounded-full text-xs",children:"Bekliyor"});case"CANCELED":return(0,b.jsx)("span",{className:"px-2 py-1 bg-red-100 text-red-700 rounded-full text-xs",children:"İptal"});default:return(0,b.jsx)("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded-full text-xs",children:a})}})(a.status)}),(0,b.jsx)("td",{className:"px-6 py-4 text-right",children:(0,b.jsx)("div",{className:"flex items-center justify-end gap-2",children:"PENDING_CONFIRMATION"===a.status&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{onClick:()=>q(a.id,"CONFIRMED"),disabled:n[a.id],className:"p-1.5 text-green-600 hover:bg-green-50 rounded",title:"Onayla",children:(0,b.jsx)(g,{className:"w-4 h-4"})}),(0,b.jsx)("button",{onClick:()=>q(a.id,"CANCELED"),disabled:n[a.id],className:"p-1.5 text-red-600 hover:bg-red-50 rounded",title:"Reddet",children:(0,b.jsx)(h.X,{className:"w-4 h-4"})})]})})})]},a.id)),0===p.length&&(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:5,className:"px-6 py-8 text-center text-gray-500",children:"Kayıt bulunamadı."})})]})]})})]})}a.s(["default",()=>i],11864)}];

//# sourceMappingURL=app_admin_appointments_AppointmentsTable_tsx_351e4c22._.js.map