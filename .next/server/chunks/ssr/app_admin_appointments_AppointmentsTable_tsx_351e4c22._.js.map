{"version":3,"sources":["../../../../app/admin/appointments/AppointmentsTable.tsx","../../../../node_modules/lucide-react/src/icons/check.ts"],"sourcesContent":["'use client'\n\nimport { useState } from 'react'\nimport { useRouter } from 'next/navigation'\nimport { format } from 'date-fns'\nimport { tr } from 'date-fns/locale'\nimport { Check, X, Trash2, Eye } from 'lucide-react'\n\n// Types\ninterface Appointment {\n    id: string\n    customerName: string\n    customerPhone: string\n    startAt: string\n    status: string\n    service?: {\n        name: string\n    } | null // Handle join\n}\n\nexport default function AppointmentsTable({ initialData }: { initialData: Appointment[] }) {\n    const router = useRouter()\n    const [appointments, setAppointments] = useState(initialData)\n    const [filter, setFilter] = useState('ALL') // ALL, PENDING, CONFIRMED\n    const [loadingMap, setLoadingMap] = useState<Record<string, boolean>>({})\n\n    const filtered = appointments.filter(a => {\n        if (filter === 'ALL') return true\n        if (filter === 'PENDING') return a.status === 'PENDING_CONFIRMATION'\n        return a.status === filter\n    })\n\n    const handleStatusUpdate = async (id: string, newStatus: string) => {\n        setLoadingMap(prev => ({ ...prev, [id]: true }))\n        try {\n            const res = await fetch(`/api/appointments/${id}`, {\n                method: 'PATCH',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify({ status: newStatus })\n            })\n\n            if (res.ok) {\n                setAppointments(prev => prev.map(a =>\n                    a.id === id ? { ...a, status: newStatus } : a\n                ))\n                router.refresh()\n            }\n        } catch (error) {\n            console.error(error)\n        } finally {\n            setLoadingMap(prev => ({ ...prev, [id]: false }))\n        }\n    }\n\n    const getStatusBadge = (status: string) => {\n        switch (status) {\n            case 'CONFIRMED': return <span className=\"px-2 py-1 bg-green-100 text-green-700 rounded-full text-xs\">Onaylı</span>\n            case 'PENDING_CONFIRMATION': return <span className=\"px-2 py-1 bg-orange-100 text-orange-700 rounded-full text-xs\">Bekliyor</span>\n            case 'CANCELED': return <span className=\"px-2 py-1 bg-red-100 text-red-700 rounded-full text-xs\">İptal</span>\n            default: return <span className=\"px-2 py-1 bg-gray-100 text-gray-700 rounded-full text-xs\">{status}</span>\n        }\n    }\n\n    return (\n        <div className=\"bg-white rounded-lg shadow-sm\">\n            {/* Filter Header */}\n            <div className=\"p-4 border-b border-gray-100 flex gap-2\">\n                {['ALL', 'PENDING', 'CONFIRMED', 'CANCELED'].map(f => (\n                    <button\n                        key={f}\n                        onClick={() => setFilter(f)}\n                        className={`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${filter === f ? 'bg-primary-50 text-primary-700' : 'text-gray-600 hover:bg-gray-50'\n                            }`}\n                    >\n                        {f === 'ALL' ? 'Tümü' : f === 'PENDING' ? 'Bekleyenler' : f}\n                    </button>\n                ))}\n            </div>\n\n            {/* Table */}\n            <div className=\"overflow-x-auto\">\n                <table className=\"w-full text-sm text-left\">\n                    <thead className=\"text-xs text-gray-700 uppercase bg-gray-50\">\n                        <tr>\n                            <th className=\"px-6 py-3\">Müşteri</th>\n                            <th className=\"px-6 py-3\">Hizmet</th>\n                            <th className=\"px-6 py-3\">Tarih</th>\n                            <th className=\"px-6 py-3\">Durum</th>\n                            <th className=\"px-6 py-3 text-right\">İşlemler</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        {filtered.map(appointment => (\n                            <tr key={appointment.id} className=\"bg-white border-b hover:bg-gray-50\">\n                                <td className=\"px-6 py-4 font-medium text-gray-900\">\n                                    {appointment.customerName}\n                                    <div className=\"text-gray-500 text-xs font-normal\">{appointment.customerPhone}</div>\n                                </td>\n                                <td className=\"px-6 py-4\">\n                                    {(appointment.service as any)?.name || 'Hizmet silinmiş'}\n                                </td>\n                                <td className=\"px-6 py-4\">\n                                    {format(new Date(appointment.startAt), 'd MMM yyyy HH:mm', { locale: tr })}\n                                </td>\n                                <td className=\"px-6 py-4\">\n                                    {getStatusBadge(appointment.status)}\n                                </td>\n                                <td className=\"px-6 py-4 text-right\">\n                                    <div className=\"flex items-center justify-end gap-2\">\n                                        {appointment.status === 'PENDING_CONFIRMATION' && (\n                                            <>\n                                                <button\n                                                    onClick={() => handleStatusUpdate(appointment.id, 'CONFIRMED')}\n                                                    disabled={loadingMap[appointment.id]}\n                                                    className=\"p-1.5 text-green-600 hover:bg-green-50 rounded\"\n                                                    title=\"Onayla\"\n                                                >\n                                                    <Check className=\"w-4 h-4\" />\n                                                </button>\n                                                <button\n                                                    onClick={() => handleStatusUpdate(appointment.id, 'CANCELED')}\n                                                    disabled={loadingMap[appointment.id]}\n                                                    className=\"p-1.5 text-red-600 hover:bg-red-50 rounded\"\n                                                    title=\"Reddet\"\n                                                >\n                                                    <X className=\"w-4 h-4\" />\n                                                </button>\n                                            </>\n                                        )}\n                                        {/* Future: Delete or View Details */}\n                                    </div>\n                                </td>\n                            </tr>\n                        ))}\n                        {filtered.length === 0 && (\n                            <tr>\n                                <td colSpan={5} className=\"px-6 py-8 text-center text-gray-500\">\n                                    Kayıt bulunamadı.\n                                </td>\n                            </tr>\n                        )}\n                    </tbody>\n                </table>\n            </div>\n        </div>\n    )\n}\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Check\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjAgNiA5IDE3bC01LTUiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/check\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Check = createLucideIcon('Check', [['path', { d: 'M20 6 9 17l-5-5', key: '1gmf2c' }]]);\n\nexport default Check;\n"],"names":[],"mappings":"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","ignoreList":[1]}